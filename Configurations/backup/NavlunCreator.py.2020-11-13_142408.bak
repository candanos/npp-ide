import sys 
import os
import datetime
import shutil
import ebcdic
import pathlib

fileName = "YHKEYBUL.cbl"
sourceDir = r'C:/u/ttg/tfsRepos/mainframe-all-apps/COBOL'
targetDir = r'C:/Cloud/github/bebop-rest/target'


def main():    
    convertFileToEbcdic()
    
def convertFileToEbcdic():
    sourceFile = sourceDir + "/" + fileName
    targetFile = targetDir + "/" + fileName
    # with open(sourceFile, 'r', encoding='utf-8') as fi: lineArr = fi.readlines()
    # with open(sourceFile, "rb") as inf:
        # with open(sourceFile, "w") as fixed:
            # for line in inf:
                # fixed.write(line)
                
    with open(sourceFile, 'r', encoding='utf-8') as fi: lineArr = fi.readlines()        
    allbytes = bytearray()
    print(len(lineArr))
    for line in lineArr:
    # bytearray(b'\xab')
        line = line.strip()
        # line = line.replace("\x25",'') 
        # allbytes.extend(bytes(line,'cp1026'))
        # allbytes.extend(b'\x0D')
        # allbytes.extend(b'\x15')
        print("line>>" + line + "<<")
    with open(targetFile, 'wb') as file: file.write(allbytes)
    
     



if __name__ == '__main__': 
    main()