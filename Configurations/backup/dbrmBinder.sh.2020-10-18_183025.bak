#!/bin/sh
ussPath=$1
coll=$2
base=$3

fileNameWithExt=${ussPath##*/}
name=${fileNameWithExt%%.*}
ext=${fileNameWithExt##*.}
mbr=$name

log="$base/log/$mbr""Bind.log"

db2 -s CONNECT TO DV0B USER xlrint1 USING xebadm23 1>$log 2>>$log
RC=$?
if test $RC -gt 0
then exit $RC
fi


db2 BIND $ussPath -collection $coll PACKAGE($coll) MEMBER($mbr) ACT(REP) ISO(CS) OWNER(DB2DBA) ENABLE(*) ENCODING(EBCDIC) EXPLAIN(YES) VALIDATE(BIND) 1>>$log 2>>$log
RC=$?
if test $RC -gt 0
then exit $RC
fi

db2 DISCONNECT 1>>$log 2>>$log
RC=$?
if test $RC -gt 0
then exit $RC
fi

# db2 +c -s -f db2Binder.sql
exit $?